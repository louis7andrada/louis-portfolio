<div id="contactSuccessMessage" class="hidden mb-6 text-green-600 font-medium text-center">
  Thank you â€” your message has been sent successfully. Louis will get back to you soon.
</div>

<form 
  id="contactForm"
  action="https://formspree.io/f/maqdkwkv"
  method="POST"
  class="grid grid-cols-1 gap-4"
>

  <input type="hidden" name="_captcha" value="false">
  <input type="text" name="_gotcha" class="hidden">

  <!-- reCAPTCHA v3 token -->
  <input type="hidden" name="g-recaptcha-response" class="recaptcha-token-field">

  <input 
    type="text" 
    name="name" 
    placeholder="Your Name" 
    class="border border-gray-300 rounded p-3"
    required
  />

  <input 
    type="email" 
    name="email" 
    placeholder="Your Email" 
    class="border border-gray-300 rounded p-3"
    required
  />

  <input 
    type="tel" 
    name="phone" 
    placeholder="Your Phone Number" 
    class="border border-gray-300 rounded p-3"
    required
  />

  <textarea 
    name="message" 
    placeholder="Your message..."
    rows="5"
    class="border border-gray-300 rounded p-3"
    required
  ></textarea>

  <button 
    type="submit"
    class="px-6 py-3 bg-black text-white rounded-lg font-medium hover:bg-gray-800 transition"
  >
    Send Message
  </button>

</form>

<script>
const form = document.getElementById("contactForm");
const successMessage = document.getElementById("contactSuccessMessage");

form.addEventListener("submit", async function(event) {
  event.preventDefault();

  // 1. Get reCAPTCHA v3 token using global Hugo key
  const token = await grecaptcha.execute(RECAPTCHA_SITE_KEY, { action: "submit" });
  form.querySelector(".recaptcha-token-field").value = token;

  // 2. Submit form to Formspree
  const data = new FormData(form);

  const response = await fetch(form.action, {
    method: "POST",
    body: data,
    headers: {
      'Accept': 'application/json'
    }
  });

  if (response.ok) {
    form.reset();
    successMessage.classList.remove("hidden");
  } else {
    alert("There was an error. Please try again.");
  }
});
</script>
